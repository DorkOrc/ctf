scoreboard players set $started_win_countdown var 1
scoreboard players operation $win_countdown var = $time_to_win const
execute store result bossbar win_timer max run scoreboard players get $time_to_win const
bossbar set win_timer players @a
bossbar set win_timer visible true

tellraw @a "---------------------------------------------------\n"
execute if score $flags_capt.mesa var >= $flags_to_win const run tellraw @a [[{"nbt":"mesa","storage":"colors","interpret":true},{"text":"MESA","bold":true}],[{"text":" HAS CAPTURED ","color": "white","bold": true},{"score":{"name":"$flags_to_win","objective":"const"},"color":"gold"},{"text":" FLAGS","color":"gold","bold": true},{"text":"!","color": "white","bold": true},{"text":"\nIf they can defend them for ","color":"white","bold": false},{"text":"5 minutes","color":"#5ECFFF","bold": false},{"text":", they win the game!","color":"white","bold": false}]]
execute if score $flags_capt.cherry var >= $flags_to_win const run tellraw @a [[{"nbt":"cherry","storage":"colors","interpret":true},{"text":"CHERRY","bold":true}],[{"text":" HAS CAPTURED ","color": "white","bold": true},{"score":{"name":"$flags_to_win","objective":"const"},"color":"gold"},{"text":" FLAGS","color":"gold","bold": true},{"text":"!","color": "white","bold": true},{"text":"\nIf they can defend them for ","color":"white","bold": false},{"text":"5 minutes","color":"#5ECFFF","bold": false},{"text":", they win the game!","color":"white","bold": false}]]
execute if score $flags_capt.desert var >= $flags_to_win const run tellraw @a [[{"nbt":"desert","storage":"colors","interpret":true},{"text":"DESERT","bold":true}],[{"text":" HAS CAPTURED ","color": "white","bold": true},{"score":{"name":"$flags_to_win","objective":"const"},"color":"gold"},{"text":" FLAGS","color":"gold","bold": true},{"text":"!","color": "white","bold": true},{"text":"\nIf they can defend them for ","color":"white","bold": false},{"text":"5 minutes","color":"#5ECFFF","bold": false},{"text":", they win the game!","color":"white","bold": false}]]
execute if score $flags_capt.ice var >= $flags_to_win const run tellraw @a [[{"nbt":"ice","storage":"colors","interpret":true},{"text":"ICE","bold":true}],[{"text":" HAS CAPTURED ","color": "white","bold": true},{"score":{"name":"$flags_to_win","objective":"const"},"color":"gold"},{"text":" FLAGS","color":"gold","bold": true},{"text":"!","color": "white","bold": true},{"text":"\nIf they can defend them for ","color":"white","bold": false},{"text":"5 minutes","color":"#5ECFFF","bold": false},{"text":", they win the game!","color":"white","bold": false}]]
execute if score $flags_capt.forest var >= $flags_to_win const run tellraw @a [[{"nbt":"forest","storage":"colors","interpret":true},{"text":"FOREST","bold":true}],[{"text":" HAS CAPTURED ","color": "white","bold": true},{"score":{"name":"$flags_to_win","objective":"const"},"color":"gold"},{"text":" FLAGS","color":"gold","bold": true},{"text":"!","color": "white","bold": true},{"text":"\nIf they can defend them for ","color":"white","bold": false},{"text":"5 minutes","color":"#5ECFFF","bold": false},{"text":", they win the game!","color":"white","bold": false}]]
tellraw @a "\n---------------------------------------------------"

execute as @a at @s run playsound entity.wither.spawn master @s ~ ~ ~
